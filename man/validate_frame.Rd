% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/validation.R
\name{validate_frame}
\alias{validate_frame}
\title{Validate a Frame Against a Design}
\usage{
validate_frame(design, frame, stage = NULL)
}
\arguments{
\item{design}{A \code{sampling_design} object}

\item{frame}{A data frame to validate}

\item{stage}{Which stage(s) to validate against. Default validates all stages.}
}
\value{
Invisibly returns \code{TRUE} if validation passes.
Throws an informative error if validation fails.
}
\description{
Checks if a data frame contains all required variables for a sampling
design and reports any issues.
}
\details{
Validation checks include:
\itemize{
\item Presence of required stratification variables
\item Presence of required clustering variables
\item Presence of measure of size (MOS) variables for PPS sampling
\item Non-empty frame
\item Positive values for MOS variables
}
}
\examples{
# Create a design requiring region stratification and PPS by household count
design <- sampling_design() |>
  stratify_by(region) |>
  cluster_by(ea_id) |>
  draw(n = 10, method = "pps_brewer", mos = hh_count)

# Validate against niger_eas (should pass)
validate_frame(design, niger_eas)

# Create a frame missing required variables (will fail)
bad_frame <- data.frame(id = 1:100, value = rnorm(100))
try(validate_frame(design, bad_frame))

# Validate only specific stages of a multi-stage design
multi_design <- sampling_design() |>
  add_stage(label = "Schools") |>
    cluster_by(school_id) |>
    draw(n = 30, method = "pps_brewer", mos = enrollment) |>
  add_stage(label = "Students") |>
    draw(n = 15)

# Validate stage 1 only
validate_frame(multi_design, tanzania_schools, stage = 1)

}
