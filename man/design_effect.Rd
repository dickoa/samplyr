% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/svyplan-compat.R
\name{design_effect}
\alias{design_effect}
\alias{effective_n}
\alias{design_effect.tbl_sample}
\alias{effective_n.tbl_sample}
\title{Design Effect and Effective Sample Size}
\usage{
design_effect(x = NULL, ...)

effective_n(x = NULL, ...)

\method{design_effect}{tbl_sample}(x, ..., y = NULL, x_cal = NULL, method = "kish")

\method{effective_n}{tbl_sample}(x, ..., y = NULL, x_cal = NULL, method = "kish")
}
\arguments{
\item{x}{A numeric weight vector or a \code{tbl_sample}.}

\item{...}{Passed to the svyplan method.}

\item{y}{<\code{\link[dplyr:dplyr_data_masking]{data-masking}}> Outcome variable
(column name). Required for Henry, Spencer, and CR methods.}

\item{x_cal}{<\code{\link[dplyr:dplyr_data_masking]{data-masking}}> Calibration
covariate (column name). Required for the Henry method.}

\item{method}{Design effect method. One of \code{"kish"} (default), \code{"henry"},
\code{"spencer"}, or \code{"cr"}. See \code{\link[svyplan:design_effect]{svyplan::design_effect()}} for details.}
}
\description{
Re-exported from \pkg{svyplan}. Compute the design effect or effective
sample size from sampling weights. Five methods are available: Kish
(default), Henry, Spencer, Chen-Rust, and cluster planning.
}
\details{
The \code{tbl_sample} methods extract what they can from the sample:
\itemize{
\item Weights from \code{.weight}
\item Selection probabilities from \code{.weight_1} (for Spencer)
\item Stratification and clustering variables from the stored design (for CR)
}

The user only needs to supply column names for variables that are not
part of the sampling metadata: \code{y} (outcome) for all non-Kish methods,
and \code{x_cal} (calibration covariate) for Henry.
}
\examples{
# Kish design effect (default)
frame <- data.frame(
  id = 1:200,
  stratum = rep(c("A", "B"), each = 100),
  income = c(rnorm(100, 50, 10), rnorm(100, 80, 15))
)
samp <- sampling_design() |>
  stratify_by(stratum) |>
  draw(n = c(A = 10, B = 40)) |>
  execute(frame, seed = 1)

design_effect(samp)
effective_n(samp)

# Spencer (selection probabilities extracted automatically)
design_effect(samp, y = income, method = "spencer")

}
\seealso{
\code{\link[svyplan:design_effect]{svyplan::design_effect()}}, \code{\link[svyplan:effective_n]{svyplan::effective_n()}}
}
